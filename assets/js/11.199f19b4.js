(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{551:function(t,e,r){},659:function(t,e,r){"use strict";r(551)},671:function(t,e,r){"use strict";r.r(e);r(600),r(18),r(270),r(49),r(601),r(603),r(605),r(606),r(607),r(7),r(609),r(615),r(616),r(618),r(619),r(620),r(623),r(624),r(625),r(626),r(627),r(628),r(629),r(630),r(631),r(632),r(633),r(634),r(635),r(636),r(637),r(638),r(639),r(640),r(641),r(25),r(34),r(642),r(550),r(124);var i=r(537),n=r.n(i),a=(r(540),r(541)),s=r.n(a),o=(r(542),r(644)),c=r.n(o),l=(r(652),r(653)),u=r.n(l),h=(r(654),r(655)),d=r.n(h),m=(r(657),r(658),{components:{Input:n.a,Button:s.a,Upload:c.a,Form:u.a,FormItem:d.a},computed:{realSize:function(){var t=(this.size/1024).toFixed(2);return"".concat(t," kb")},compressSize:function(){if(!this.blob)return 0;var t=(this.blob.size/1024).toFixed(2);return"".concat(t," kb")}},data:function(){return{file:{url:""},size:0,current:{width:0,height:0,rate:.5},origin:{width:0,height:0,rate:.5},blob:null,compressImg:null}},methods:{onFileChange:function(t,e){this.file=t,this.size=t.size,this.current={rate:.5,width:0,height:0},this.handleCompressImage("jpeg")},handleCompressImage:function(t){var e=this,r=new FileReader;r.readAsDataURL(this.file.raw),r.onload=function(r){var i=new Image;i.src=r.target.result,i.onload=function(){var r=document.createElement("canvas"),n=r.getContext("2d");e.current.width=e.current.width||i.width,e.current.height=e.current.height||i.height,e.origin.height=i.height,e.origin.width=i.width,r.width=e.current.width,r.height=e.current.height,n.drawImage(i,0,0,e.current.width,e.current.height);for(var a=r.toDataURL("image/".concat(t),+e.current.rate).split(";base64,"),s=a[0].split(":")[1],o=window.atob(a[1]),c=o.length,l=new Uint8Array(c),u=0;u<c;++u)l[u]=o.charCodeAt(u);e.blob=new Blob([l],{type:s}),e.compressImg=URL.createObjectURL(e.blob)}}},downloadImg:function(){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(this.blob,this.file.name);else{var t=document.createElement("a");t.href=this.compressImg,t.setAttribute("download",this.file.name),t.click()}},onReset:function(){this.current=Object.assign({},this.origin)}}}),p=(r(659),r(6)),g=Object(p.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"header"},[r("Upload",{attrs:{action:"#","list-type":"picture-card","auto-upload":!1,"on-change":t.onFileChange}},[r("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),t._v(" "),r("div",{staticClass:"header-right"},[r("Form",{attrs:{"label-position":"right","label-width":"80px",model:t.current}},[r("FormItem",{attrs:{label:"高度"}},[r("Input",{attrs:{type:"number"},model:{value:t.current.height,callback:function(e){t.$set(t.current,"height",e)},expression:"current.height"}})],1),t._v(" "),r("FormItem",{attrs:{label:"宽度"}},[r("Input",{attrs:{type:"number"},model:{value:t.current.width,callback:function(e){t.$set(t.current,"width",e)},expression:"current.width"}})],1),t._v(" "),r("FormItem",{attrs:{label:"压缩比例"}},[r("Input",{attrs:{type:"number",max:"1",min:"0"},model:{value:t.current.rate,callback:function(e){t.$set(t.current,"rate",e)},expression:"current.rate"}})],1),t._v(" "),r("FormItem",[r("div",[r("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleCompressImage("jpeg")}}},[t._v("重新生成压缩图片")]),t._v(" "),r("Button",{on:{click:t.onReset}},[t._v("重置")])],1)])],1)],1)],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.compressImg,expression:"compressImg"}],staticClass:"picture-area"},[r("div",{staticClass:"picture"},[r("div",[t._v("原图预览（"+t._s(t.realSize)+"）")]),t._v(" "),r("img",{attrs:{src:t.file.url}})]),t._v(" "),r("div",{staticClass:"picture"},[r("div",[t._v("压缩图预览（"+t._s(t.compressSize)+"）")]),t._v(" "),r("div",{staticClass:"overlay"},[r("i",{staticClass:"el-icon-download icon-download",on:{click:t.downloadImg}}),t._v(" "),r("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.compressImg,alt:""}})])])])])}),[],!1,null,"b0bf3794",null);e.default=g.exports}}]);