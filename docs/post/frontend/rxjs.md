---
title: rxjs 学习笔记
date: 2020-03-19
tags:
 - rxjs
categories:
 - 前端
---

# Operators

- ### combineLatest

将两个流最新的数据进行操作，一旦任意一个流发出新数据便会触发

```js
source : ----0----1----2|
newest : --0--1--2--3--4--5|

    combineLatest(newest, (x, y) => x + y);

example: ----01--23-4--(56)--7|
```

- ### zip

相当于地板操作，等最慢的流的数据发出后才触发，就像“你拍一，我拍一”

```js
source : ----0----1----2|
newest : --0--1--2--3--4--5|
    zip(newest, (x, y) => x + y)
example: ----0----2----4|
```

- ### withLatestFrom

主流发出一个数据时触发，但支流选择最新的数据进行操作

```js
main   : ----h----e----l----l----o|
some   : --0--1--0--0--0--1|

withLatestFrom(some, (x, y) =>  y === 1 ? x.toUpperCase() : x);

example: ----h----e----l----L----O|
```

- ### throttle, debounce

debounce是在一段时间内接受一个值，每接收一个值便重新计时，时间到了才把值送出去（对于连续的事件流不处理，我等你停下来一段时间再处理，使用场景：search框的联想搜索）

throttle是接收到数据后立马送出，开始计时，一段时间内不接受任何值，时间到了重新开始接收后立马送出再拒接（对于连续的事件流隔一段时间再去处理，使用场景：监听滚动事件）

- ### concat和concatAll

一个是按顺序执行，一个是平摊成二维数组，不一样的，例如：

[1,2,3]  [4,5,6]

concat: 1 2 3 4 5 6

concatAll: 1 4 5 6 2 4 5 6 3 4 5 6  但是他要先处理完1 4 5 6才能处理2 4 5 6，如果第一个流是无线的，则永远无法执行第二个流

- ### switch, mergeAll, concatAll 这三个是转成二维的（先转二维再进行如merge等操作，即在二维上merge）

concatAll: 一个接一个

```swift
click  : ---------c-c------------------c--..
        map(e => Rx.Observable.interval(1000))
source : ---------o-o------------------o--..
                   \ \
                    \ ----0----1----2----3----4--...
                     ----0----1----2----3----4--...
                     concatAll()
example: ----------------0----1----2----3----4--..
```

switch : 只处理最新的流，抛弃旧的

```swift
click  : ---------c-c------------------c--..
        map(e => Rx.Observable.interval(1000))
source : ---------o-o------------------o--..
                   \ \                  \----0----1--...
                    \ ----0----1----2----3----4--...
                     ----0----1----2----3----4--...
                     switch()
example: -----------------0----1----2--------0----1--...
```

mergeAll : 每个流都可以处理，可传参处理特定数量的流

```tsx
click  : ---------c-c------------------c--..
        map(e => Rx.Observable.interval(1000))
source : ---------o-o------------------o--..
                   \ \                  \----0----1--...
                    \ ----0----1----2----3----4--...
                     ----0----1----2----3----4--...
                     switch()
example: ----------------00---11---22---33---(04)4--...
```
